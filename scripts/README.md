# forecast_csv_gorochovska.py

Скрипт `forecast_csv_gorochovska.py`, містить функції для генерації прогнозів виробництва сонячної енергії та збереження їх у форматі CSV. 

## Ось детальний огляд основних частин цього скрипта:

### Імпорт модулів
Скрипт використовує кілька зовнішніх бібліотек:
- `os`: для взаємодії з операційною системою (наприклад, для роботи з файловою системою).
- `pandas`: для обробки та аналізу даних у вигляді DataFrame.
- `datetime`, `timedelta`: для роботи з датами і часом.
- `quartz_solar_forecast.forecast`: модуль для виконання прогнозування.
- `quartz_solar_forecast.pydantic_models`: модуль, який, ймовірно, містить моделі даних, наприклад, для представлення фотовольтаїчних установок.
- `unittest`, `unittest.mock`: для написання та виконання тестів.

### Функція `generate_forecast`
Ця функція є основною в скрипті та відповідає за генерацію прогнозів. Ось її параметри та опис:
- `init_time_freq`: Частота ініціалізації прогнозів у годинах.
- `start_datetime`, `end_datetime`: Рядки, які представляють початкову та кінцеву дати для генерації прогнозів.
- `site_name`: Назва місця, для якого генерується прогноз.
- `latitude`, `longitude`: Координати місця.
- `capacity_kwp`: Потужність установки в кіловатах-пік (kWp).

#### Логіка функції: `generate_forecast`
1. Перетворює `start_datetime` та `end_datetime` з рядків у об'єкти `datetime`.
2. Ініціалізує порожній DataFrame для збереження усіх прогнозів.
3. В циклі, який триває від початкової до кінцевої дати з заданим кроком (`init_time_freq`), викликає функцію `run_forecast` для генерації прогнозу та додає результати до DataFrame.
4. Зберігає всі прогнози у CSV файл.

### Тестування
У скрипті є клас `TestGenerateForecast`, який наслідує `unittest.TestCase` і містить методи для тестування `generate_forecast`. Він використовує підміну (`mock`) для імітації поведінки функції `run_forecast`, щоб перевірити, чи правильно виконується збереження прогнозів.

Цей скрипт є прикладом застосування модульного підходу в Python для автоматизації процесу генерації та збереження прогнозів виробництва сонячної енергії, що включає інтеграцію з зовнішніми API та використання обробки даних за допомогою `pandas`.